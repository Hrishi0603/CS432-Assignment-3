{% extends 'requests/base.html' %}
 
{% block title %}
Maintainence
{% endblock %}
 
{% block content %}
<h1 class="text-center my-5">Request Table</h1>
<div class="container d-flex justify-content-center align-items-center">
    <a class="btn btn-outline-info mb-3" href="{{ url_for('requests.add_requests') }}">Add Requests</a>
    
</div>
<div class="container">
    {% if message %}
    <script>
        alert("{{ message }}");
    </script>
    {% endif %}
    <table class="table table-dark table-striped">
        <thead>
        <tr>
            <th scope="col">Request ID</th>
            <th scope="col">User ID</th>
            <th scope="col">Domain ID</th>
            <th scope="col">Location ID</th>
            <th scope="col">Subject</th>
            <th scope="col">Availability</th>
            <th scope="col">Status</th>
            <th scope="col">Description</th>
            <th scope="col">Admin Comments</th>
            <th scope="col">Image</th>
            <th scope="col">Action</th>
        </tr>
        </thead>
        {% if not details %}
        <div class="text-center">
            <h3 class="my-5">No Records to Display!</h3>
        </div>
        {% else %}
        <tbody>
        {% for data in details %}
        <tr>
            <th scope="row">{{ data.request_id }}</th>
            <td>{{ data.user_id }}</td>
            <td>{{ data.domain_id }}</td>
            <td>{{ data.location_id }}</td>
            <td>{{ data.subject }}</td>
            <td>{{ data.availability }}</td>
            <td>{{ data.status }}</td>
            <td>{{ data.description }}</td>
            <td>{{ data.admin_comments }}</td>
            <td><img src="{{ data.image }}" alt="Image" width="100" height="100"></td>
            <td>
                <a href="{{ url_for('requests.update_request', request_id=data.request_id) }}" class="btn btn-primary btn-sm">Update</a>
                <form method="post" action="{{ url_for('requests.delete_request', request_id=data.request_id) }}"  style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
        {% endif %}
    </table>
</div>
{% endblock %}
